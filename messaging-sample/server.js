"use strict";
const http = require('http');
const express = require('express');
const syncs_1 = require("syncs");
require('colors');
let app = express();
let server = http.createServer(app);
let io = new syncs_1.SyncsServer(server);
server.listen(8080, () => {
    console.log("Reverse Server Started".red);
    console.log("server address " + "http://localhost:8080".blue);
});
// static file server
app.use(express.static(__dirname + '/www'));
app.get('/syncs.js', (req, res) => {
    res.send(io.clientScript);
});
// reverse each incoming message
io.onMessage((data, client) => {
    if (data.message) {
        client.send({ message: data.message.split("").reverse().join("") });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxNQUFZLElBQUksV0FBTSxNQUFNLENBQUMsQ0FBQTtBQUM3QixNQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNuQyx3QkFBMEIsT0FBTyxDQUFDLENBQUE7QUFDbEMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBSWxCLElBQUksR0FBRyxHQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2xCLElBQUksTUFBTSxHQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbEMsSUFBSSxFQUFFLEdBQUMsSUFBSSxtQkFBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBSy9CLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFDO0lBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMxQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixHQUFHLHVCQUF1QixDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2xFLENBQUMsQ0FBQyxDQUFDO0FBSUgscUJBQXFCO0FBQ3JCLEdBQUcsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUMxQyxHQUFHLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxDQUFDLEdBQUcsRUFBQyxHQUFHO0lBQ3hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQzlCLENBQUMsQ0FBQyxDQUFDO0FBR0gsZ0NBQWdDO0FBQ2hDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFRLEVBQUMsTUFBVTtJQUM3QixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUEsQ0FBQztRQUNiLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUNyRSxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUEifQ==